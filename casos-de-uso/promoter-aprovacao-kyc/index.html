
<!DOCTYPE html>

<html class="no-js" lang="pt">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentação técnica completa da plataforma Amasso" name="description"/>
<meta content="Equipe Amasso" name="author"/>
<link href="../promoter-gera-link/" rel="prev"/>
<link href="../influencer-recebe-comissao/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.22" name="generator"/>
<title>Aprovação KYC - Documentação Amasso</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="pink" data-md-color-primary="pink" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#caso-de-uso-promoter-aprovacao-kyc">
          Pular para conteúdo
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Cabeçalho" class="md-header__inner md-grid">
<a aria-label="Documentação Amasso" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Documentação Amasso">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Documentação Amasso
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Aprovação KYC
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-hidden="true" class="md-option" data-md-color-accent="pink" data-md-color-media="" data-md-color-primary="pink" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Buscar" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Buscar" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Pesquisar" class="md-search__options">
<button aria-label="Limpar" class="md-search__icon md-icon" tabindex="-1" title="Limpar" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Inicializando busca
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/pay4tru/documentation" title="Ir para repositório">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    documentation
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Abas" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Início

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../visao-geral/introducao/">
          
  
  
  Visão Geral

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../arquitetura/visao-geral/">
          
  
  
  Arquitetura

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../pagamentos/visao-geral-iugu/">
          
  
  
  Pagamentos Iugu

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../banco-de-dados/visao-geral/">
          
  
  
  Banco de Dados

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../perfis-de-usuario/admin/">
          
  
  
  Perfis de Usuário

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../fluxos-de-negocio/autenticacao/">
          
  
  
  Fluxos de Negócio

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../apis/backend-api/visao-geral/">
          
  
  
  APIs

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../guias/configuracao-ambiente/requisitos/">
          
  
  
  Guias

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../usuario-compra-video/">
          
  
  
  Casos de Uso

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navegação" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Documentação Amasso" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Documentação Amasso">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Documentação Amasso
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/pay4tru/documentation" title="Ir para repositório">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    documentation
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Início
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Visão Geral
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../visao-geral/introducao/">
<span class="md-ellipsis">
    Introdução
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../visao-geral/conceitos-principais/">
<span class="md-ellipsis">
    Conceitos Principais
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../visao-geral/glossario/">
<span class="md-ellipsis">
    Glossário
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Arquitetura
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Arquitetura
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../arquitetura/visao-geral/">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../arquitetura/backend-api/">
<span class="md-ellipsis">
    Backend API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../arquitetura/email-api/">
<span class="md-ellipsis">
    Email API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../arquitetura/frontend/">
<span class="md-ellipsis">
    Frontend
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../arquitetura/comunicacao-entre-sistemas/">
<span class="md-ellipsis">
    Comunicação
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Pagamentos Iugu
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Pagamentos Iugu
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../pagamentos/visao-geral-iugu/">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pagamentos/conta-master-subcontas/">
<span class="md-ellipsis">
    Conta Master e Subcontas
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pagamentos/processo-kyc/">
<span class="md-ellipsis">
    Processo KYC
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pagamentos/split-pagamento/">
<span class="md-ellipsis">
    Split de Pagamento
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../pagamentos/webhooks/">
<span class="md-ellipsis">
    Webhooks
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Banco de Dados
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Banco de Dados
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/visao-geral/">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/modelo-entidade-relacionamento/">
<span class="md-ellipsis">
    Modelo ER
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
<span class="md-ellipsis">
    Tabelas
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            Tabelas
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/users/">
<span class="md-ellipsis">
    Users
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/videos/">
<span class="md-ellipsis">
    Videos
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/orders/">
<span class="md-ellipsis">
    Orders
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/payments/">
<span class="md-ellipsis">
    Payments
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/owners/">
<span class="md-ellipsis">
    Owners
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/income/">
<span class="md-ellipsis">
    Income
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/notifications/">
<span class="md-ellipsis">
    Notifications
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../banco-de-dados/tabelas/relacionamentos/">
<span class="md-ellipsis">
    Relacionamentos
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Perfis de Usuário
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Perfis de Usuário
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../perfis-de-usuario/admin/">
<span class="md-ellipsis">
    Admin
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../perfis-de-usuario/default/">
<span class="md-ellipsis">
    Usuário Padrão
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../perfis-de-usuario/promoter/">
<span class="md-ellipsis">
    Promoter
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../perfis-de-usuario/influencer/">
<span class="md-ellipsis">
    Influencer
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Fluxos de Negócio
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Fluxos de Negócio
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/autenticacao/">
<span class="md-ellipsis">
    Autenticação
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/cadastro-usuario/">
<span class="md-ellipsis">
    Cadastro
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/kyc-promoter-influencer/">
<span class="md-ellipsis">
    KYC Promoter/Influencer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/compra-video/">
<span class="md-ellipsis">
    Compra de Vídeo
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/link-afiliado/">
<span class="md-ellipsis">
    Links de Afiliado
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/gestao-videos/">
<span class="md-ellipsis">
    Gestão de Vídeos
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../fluxos-de-negocio/comissoes/">
<span class="md-ellipsis">
    Comissões
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    APIs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            APIs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
<span class="md-ellipsis">
    Backend API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_1">
<span class="md-nav__icon md-icon"></span>
            Backend API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/visao-geral/">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/autenticacao/">
<span class="md-ellipsis">
    Autenticação
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8_1_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_1_3" id="__nav_8_1_3_label" tabindex="0">
<span class="md-ellipsis">
    Endpoints
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_1_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_8_1_3">
<span class="md-nav__icon md-icon"></span>
            Endpoints
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/user/">
<span class="md-ellipsis">
    User
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/video/">
<span class="md-ellipsis">
    Video
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/order/">
<span class="md-ellipsis">
    Order
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/payment/">
<span class="md-ellipsis">
    Payment
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/admin/">
<span class="md-ellipsis">
    Admin
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/owner/">
<span class="md-ellipsis">
    Owner
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/backend-api/endpoints/promoter/">
<span class="md-ellipsis">
    Promoter
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Email API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Email API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/email-api/visao-geral/">
<span class="md-ellipsis">
    Visão Geral
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/email-api/notificacoes/">
<span class="md-ellipsis">
    Notificações
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/email-api/templates/">
<span class="md-ellipsis">
    Templates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../apis/email-api/hangfire-jobs/">
<span class="md-ellipsis">
    Hangfire Jobs
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    Guias
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Guias
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
<span class="md-ellipsis">
    Configuração do Ambiente
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_1">
<span class="md-nav__icon md-icon"></span>
            Configuração do Ambiente
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/configuracao-ambiente/requisitos/">
<span class="md-ellipsis">
    Requisitos
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/configuracao-ambiente/backend/">
<span class="md-ellipsis">
    Backend
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/configuracao-ambiente/email-api/">
<span class="md-ellipsis">
    Email API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/configuracao-ambiente/frontend/">
<span class="md-ellipsis">
    Frontend
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/configuracao-ambiente/banco-dados/">
<span class="md-ellipsis">
    Banco de Dados
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
<span class="md-ellipsis">
    Desenvolvimento
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_2">
<span class="md-nav__icon md-icon"></span>
            Desenvolvimento
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/desenvolvimento/padroes-codigo/">
<span class="md-ellipsis">
    Padrões de Código
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/desenvolvimento/estrutura-projeto/">
<span class="md-ellipsis">
    Estrutura do Projeto
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/desenvolvimento/adicionar-endpoint/">
<span class="md-ellipsis">
    Adicionar Endpoint
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/desenvolvimento/adicionar-entidade/">
<span class="md-ellipsis">
    Adicionar Entidade
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guias/desenvolvimento/criar-migration/">
<span class="md-ellipsis">
    Criar Migration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
<span class="md-ellipsis">
    Casos de Uso
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Casos de Uso
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../usuario-compra-video/">
<span class="md-ellipsis">
    Compra de Vídeo
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../promoter-gera-link/">
<span class="md-ellipsis">
    Link de Afiliado
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Aprovação KYC
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Aprovação KYC
    
  </span>
</a>
<nav aria-label="Índice" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Índice
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#historia">
<span class="md-ellipsis">
      História
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#atores">
<span class="md-ellipsis">
      Atores
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-condicoes">
<span class="md-ellipsis">
      Pré-condições
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fluxo-principal">
<span class="md-ellipsis">
      Fluxo Principal
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#enum-ownersubaccountstatusenum">
<span class="md-ellipsis">
      Enum: OwnerSubAccountStatusEnum
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fluxo-passo-a-passo">
<span class="md-ellipsis">
      Fluxo Passo a Passo
    </span>
</a>
<nav aria-label="Fluxo Passo a Passo" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-promoter-envia-documentos">
<span class="md-ellipsis">
      1. Promoter Envia Documentos
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-admin-revisa-documentos">
<span class="md-ellipsis">
      2. Admin Revisa Documentos
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-admin-aprova-kyc">
<span class="md-ellipsis">
      3. Admin Aprova KYC
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-admin-rejeita-kyc-alternativo">
<span class="md-ellipsis">
      4. Admin Rejeita KYC (Alternativo)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#documentos-necessarios">
<span class="md-ellipsis">
      Documentos Necessários
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restricoes-por-status">
<span class="md-ellipsis">
      Restrições por Status
    </span>
</a>
<nav aria-label="Restrições por Status" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#notstarted">
<span class="md-ellipsis">
      NotStarted
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pending">
<span class="md-ellipsis">
      Pending
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#approved">
<span class="md-ellipsis">
      Approved
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rejected">
<span class="md-ellipsis">
      Rejected
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#regras-de-negocio">
<span class="md-ellipsis">
      Regras de Negócio
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#proximos-passos">
<span class="md-ellipsis">
      Próximos Passos
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../influencer-recebe-comissao/">
<span class="md-ellipsis">
    Comissão Influencer
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../admin-gerencia-plataforma/">
<span class="md-ellipsis">
    Gestão Admin
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Índice" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Índice
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#historia">
<span class="md-ellipsis">
      História
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#atores">
<span class="md-ellipsis">
      Atores
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-condicoes">
<span class="md-ellipsis">
      Pré-condições
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fluxo-principal">
<span class="md-ellipsis">
      Fluxo Principal
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#enum-ownersubaccountstatusenum">
<span class="md-ellipsis">
      Enum: OwnerSubAccountStatusEnum
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fluxo-passo-a-passo">
<span class="md-ellipsis">
      Fluxo Passo a Passo
    </span>
</a>
<nav aria-label="Fluxo Passo a Passo" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-promoter-envia-documentos">
<span class="md-ellipsis">
      1. Promoter Envia Documentos
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-admin-revisa-documentos">
<span class="md-ellipsis">
      2. Admin Revisa Documentos
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-admin-aprova-kyc">
<span class="md-ellipsis">
      3. Admin Aprova KYC
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-admin-rejeita-kyc-alternativo">
<span class="md-ellipsis">
      4. Admin Rejeita KYC (Alternativo)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#documentos-necessarios">
<span class="md-ellipsis">
      Documentos Necessários
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restricoes-por-status">
<span class="md-ellipsis">
      Restrições por Status
    </span>
</a>
<nav aria-label="Restrições por Status" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#notstarted">
<span class="md-ellipsis">
      NotStarted
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pending">
<span class="md-ellipsis">
      Pending
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#approved">
<span class="md-ellipsis">
      Approved
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rejected">
<span class="md-ellipsis">
      Rejected
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#regras-de-negocio">
<span class="md-ellipsis">
      Regras de Negócio
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#proximos-passos">
<span class="md-ellipsis">
      Próximos Passos
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="caso-de-uso-promoter-aprovacao-kyc">Caso de Uso: Promoter - Aprovação KYC<a class="headerlink" href="#caso-de-uso-promoter-aprovacao-kyc" title="Permanent link">¶</a></h1>
<h2 id="historia">História<a class="headerlink" href="#historia" title="Permanent link">¶</a></h2>
<blockquote>
<p>"Como <strong>promoter</strong>, preciso ter meu <strong>KYC aprovado</strong> para poder operar na plataforma e receber comissões através de minha subconta Iugu."</p>
</blockquote>
<h2 id="atores">Atores<a class="headerlink" href="#atores" title="Permanent link">¶</a></h2>
<ul>
<li><strong>Promoter</strong> (usuário que deseja ser afiliado)</li>
<li><strong>Admin</strong> (aprova/rejeita documentos)</li>
<li><strong>Sistema</strong> (Backend API + Iugu)</li>
</ul>
<h2 id="pre-condicoes">Pré-condições<a class="headerlink" href="#pre-condicoes" title="Permanent link">¶</a></h2>
<ol>
<li>Promoter deve estar logado</li>
<li>Promoter deve ter tipo de usuário <code>Promoter</code></li>
</ol>
<h2 id="fluxo-principal">Fluxo Principal<a class="headerlink" href="#fluxo-principal" title="Permanent link">¶</a></h2>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; NotStarted: Promoter criado
    NotStarted --&gt; Pending: Envia documentos
    Pending --&gt; Approved: Admin aprova
    Pending --&gt; Rejected: Admin rejeita
    Rejected --&gt; Pending: Reenvia documentos
    Approved --&gt; [*]: Pode operar

    note right of Pending
        Subconta Iugu criada
        Aguarda revisão admin
    end note

    note right of Approved
        Pode gerar links
        Pode receber comissões
    end note

    note right of Rejected
        Deve corrigir documentos
        e reenviar
    end note</code></pre>
<h2 id="enum-ownersubaccountstatusenum">Enum: OwnerSubAccountStatusEnum<a class="headerlink" href="#enum-ownersubaccountstatusenum" title="Permanent link">¶</a></h2>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">OwnerSubAccountStatusEnum</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">NotStarted</span><span class="p">,</span><span class="w">  </span><span class="c1">// Ainda não enviou documentos</span>
<span class="w">    </span><span class="n">Pending</span><span class="p">,</span><span class="w">     </span><span class="c1">// Aguardando aprovação</span>
<span class="w">    </span><span class="n">Approved</span><span class="p">,</span><span class="w">    </span><span class="c1">// Aprovado, pode operar</span>
<span class="w">    </span><span class="n">Rejected</span><span class="w">     </span><span class="c1">// Rejeitado, deve reenviar</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="fluxo-passo-a-passo">Fluxo Passo a Passo<a class="headerlink" href="#fluxo-passo-a-passo" title="Permanent link">¶</a></h2>
<h3 id="1-promoter-envia-documentos">1. Promoter Envia Documentos<a class="headerlink" href="#1-promoter-envia-documentos" title="Permanent link">¶</a></h3>
<p><strong>Frontend:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// pages/Owner/KycSubmission.tsx</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">KycSubmission</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">register</span><span class="p">,</span><span class="w"> </span><span class="nx">handleSubmit</span><span class="p">,</span><span class="w"> </span><span class="nx">formState</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">errors</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useForm</span><span class="o">&lt;</span><span class="nx">KycForm</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">isSubmitting</span><span class="p">,</span><span class="w"> </span><span class="nx">setIsSubmitting</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">onSubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">KycForm</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">setIsSubmitting</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">()</span>

<span class="w">      </span><span class="c1">// Dados pessoais</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'cpf'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">cpf</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'rg'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">rg</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'birthDate'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">birthDate</span><span class="p">)</span>

<span class="w">      </span><span class="c1">// Endereço</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressStreet'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressStreet</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressNumber'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressNumber</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressCity'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressCity</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressState'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressState</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressZipcode'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressZipcode</span><span class="p">)</span>

<span class="w">      </span><span class="c1">// Dados bancários</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'bankCode'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">bankCode</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'bankAgency'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">bankAgency</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'bankAccount'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">bankAccount</span><span class="p">)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'bankAccountType'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">bankAccountType</span><span class="p">)</span>

<span class="w">      </span><span class="c1">// Documentos (arquivos)</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'cpfFile'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">cpfFile</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'rgFile'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">rgFile</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'addressProofFile'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">addressProofFile</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>
<span class="w">      </span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'selfieFile'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">selfieFile</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span>

<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">httpClient</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/api/owners/kyc'</span><span class="p">,</span><span class="w"> </span><span class="nx">formData</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'Content-Type'</span><span class="o">:</span><span class="w"> </span><span class="s1">'multipart/form-data'</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">})</span>

<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s1">'Documentos enviados! Aguarde aprovação.'</span><span class="p">)</span>
<span class="w">      </span><span class="nx">navigate</span><span class="p">(</span><span class="s1">'/dashboard'</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">any</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="o">?</span><span class="p">.</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'Erro ao enviar documentos'</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">setIsSubmitting</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">form</span><span class="w"> </span><span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">onSubmit</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Enviar</span><span class="w"> </span><span class="nx">Documentos</span><span class="w"> </span><span class="nx">KYC</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Formulário completo */</span><span class="p">}</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="kr">type</span><span class="o">=</span><span class="s2">"submit"</span><span class="w"> </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">isSubmitting</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">isSubmitting</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'Enviando...'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'Enviar Documentos'</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/form&gt;</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Backend:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// OwnerEndpoints.cs</span>
<span class="n">app</span><span class="p">.</span><span class="n">MapPost</span><span class="p">(</span><span class="s">"/api/owners/kyc"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">HttpRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span>
<span class="w">    </span><span class="n">OwnerService</span><span class="w"> </span><span class="n">service</span><span class="p">,</span>
<span class="w">    </span><span class="n">ICloudinaryService</span><span class="w"> </span><span class="n">cloudinary</span><span class="p">,</span>
<span class="w">    </span><span class="n">IIuguService</span><span class="w"> </span><span class="n">iugu</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">userId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetUserIdFromToken</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">ReadFormAsync</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// 1. Upload documentos para Cloudinary</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">cpfUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">cloudinary</span><span class="p">.</span><span class="n">UploadAsync</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="n">Files</span><span class="p">[</span><span class="s">"cpfFile"</span><span class="p">]);</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rgUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">cloudinary</span><span class="p">.</span><span class="n">UploadAsync</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="n">Files</span><span class="p">[</span><span class="s">"rgFile"</span><span class="p">]);</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">addressProofUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">cloudinary</span><span class="p">.</span><span class="n">UploadAsync</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="n">Files</span><span class="p">[</span><span class="s">"addressProofFile"</span><span class="p">]);</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">selfieUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">cloudinary</span><span class="p">.</span><span class="n">UploadAsync</span><span class="p">(</span><span class="n">form</span><span class="p">.</span><span class="n">Files</span><span class="p">[</span><span class="s">"selfieFile"</span><span class="p">]);</span>

<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">dto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubmitKycDto</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Cpf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"cpf"</span><span class="p">],</span>
<span class="w">        </span><span class="n">Rg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"rg"</span><span class="p">],</span>
<span class="w">        </span><span class="n">BirthDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">form</span><span class="p">[</span><span class="s">"birthDate"</span><span class="p">]),</span>
<span class="w">        </span><span class="n">AddressStreet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"addressStreet"</span><span class="p">],</span>
<span class="w">        </span><span class="n">AddressNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"addressNumber"</span><span class="p">],</span>
<span class="w">        </span><span class="n">AddressCity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"addressCity"</span><span class="p">],</span>
<span class="w">        </span><span class="n">AddressState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"addressState"</span><span class="p">],</span>
<span class="w">        </span><span class="n">AddressZipcode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"addressZipcode"</span><span class="p">],</span>
<span class="w">        </span><span class="n">BankCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"bankCode"</span><span class="p">],</span>
<span class="w">        </span><span class="n">BankAgency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"bankAgency"</span><span class="p">],</span>
<span class="w">        </span><span class="n">BankAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"bankAccount"</span><span class="p">],</span>
<span class="w">        </span><span class="n">BankAccountType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">form</span><span class="p">[</span><span class="s">"bankAccountType"</span><span class="p">],</span>
<span class="w">        </span><span class="n">DocumentCpfUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpfUrl</span><span class="p">,</span>
<span class="w">        </span><span class="n">DocumentRgUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rgUrl</span><span class="p">,</span>
<span class="w">        </span><span class="n">DocumentAddressProofUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">addressProofUrl</span><span class="p">,</span>
<span class="w">        </span><span class="n">DocumentSelfieUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">selfieUrl</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="n">SubmitKycAsync</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span><span class="w"> </span><span class="n">dto</span><span class="p">,</span><span class="w"> </span><span class="n">iugu</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Results</span><span class="p">.</span><span class="n">Ok</span><span class="p">(</span><span class="k">new</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">OwnerId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span>
<span class="w">        </span><span class="n">IuguAccountId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">IuguAccountId</span><span class="p">,</span>
<span class="w">        </span><span class="n">SubAccountStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">SubAccountStatus</span><span class="p">,</span>
<span class="w">        </span><span class="n">Message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Documentos enviados com sucesso! Aguarde aprovação."</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">})</span>
<span class="p">.</span><span class="n">RequireAuthorization</span><span class="p">()</span>
<span class="p">.</span><span class="n">DisableAntiforgery</span><span class="p">()</span>
<span class="p">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"SubmitKyc"</span><span class="p">);</span>
</code></pre></div></p>
<p><strong>Service:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// OwnerService.cs</span>
<span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">Owner</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SubmitKycAsync</span><span class="p">(</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">SubmitKycDto</span><span class="w"> </span><span class="n">dto</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="n">IIuguService</span><span class="w"> </span><span class="n">iugu</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Users</span><span class="p">.</span><span class="n">FindAsync</span><span class="p">(</span><span class="n">userId</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Verificar tipo</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="n">Type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UserTypeEnum</span><span class="p">.</span><span class="n">Promoter</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">        </span><span class="n">user</span><span class="p">.</span><span class="n">Type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UserTypeEnum</span><span class="p">.</span><span class="n">Influencer</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">InvalidOperationException</span><span class="p">(</span>
<span class="w">            </span><span class="s">"Apenas Promoters e Influencers podem enviar KYC"</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Owners</span>
<span class="w">        </span><span class="p">.</span><span class="n">FirstOrDefaultAsync</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">UserId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">userId</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">owner</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Owner</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">UserId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userId</span><span class="p">,</span>
<span class="w">            </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">Type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UserTypeEnum</span><span class="p">.</span><span class="n">Promoter</span><span class="w"> </span>
<span class="w">                </span><span class="o">?</span><span class="w"> </span><span class="n">OwnerTypeEnum</span><span class="p">.</span><span class="n">Promoter</span><span class="w"> </span>
<span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="n">OwnerTypeEnum</span><span class="p">.</span><span class="n">Influencer</span><span class="p">,</span>
<span class="w">            </span><span class="n">CreatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">        </span><span class="p">};</span>

<span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Owners</span><span class="p">.</span><span class="n">AddAsync</span><span class="p">(</span><span class="n">owner</span><span class="p">);</span>
<span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Atualizar dados</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">CpfCnpj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Cpf</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">Rg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Rg</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">BirthDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">BirthDate</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">AddressStreet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">AddressStreet</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">AddressNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">AddressNumber</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">AddressCity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">AddressCity</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">AddressState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">AddressState</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">AddressZipcode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">AddressZipcode</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">BankCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">BankCode</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">BankAgency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">BankAgency</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">BankAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">BankAccount</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">BankAccountType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">BankAccountType</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">DocumentCpfUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">DocumentCpfUrl</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">DocumentRgUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">DocumentRgUrl</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">DocumentAddressProofUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">DocumentAddressProofUrl</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">DocumentSelfieUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">DocumentSelfieUrl</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Criar subconta Iugu (se não existe)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">owner</span><span class="p">.</span><span class="n">IuguAccountId</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">subAccount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">iugu</span><span class="p">.</span><span class="n">CreateSubAccountAsync</span><span class="p">(</span><span class="k">new</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">$"{user.FirstName} {user.LastName}"</span><span class="p">,</span>
<span class="w">            </span><span class="n">Email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="n">Email</span><span class="p">,</span>
<span class="w">            </span><span class="n">Cpf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Cpf</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="n">owner</span><span class="p">.</span><span class="n">IuguAccountId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subAccount</span><span class="p">.</span><span class="n">AccountId</span><span class="p">;</span>
<span class="w">        </span><span class="n">owner</span><span class="p">.</span><span class="n">IuguLiveApiToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subAccount</span><span class="p">.</span><span class="n">LiveApiToken</span><span class="p">;</span>
<span class="w">        </span><span class="n">owner</span><span class="p">.</span><span class="n">IuguTestApiToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subAccount</span><span class="p">.</span><span class="n">TestApiToken</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Atualizar subconta existente</span>
<span class="w">        </span><span class="k">await</span><span class="w"> </span><span class="n">iugu</span><span class="p">.</span><span class="n">UpdateSubAccountAsync</span><span class="p">(</span><span class="n">owner</span><span class="p">.</span><span class="n">IuguAccountId</span><span class="p">,</span><span class="w"> </span><span class="k">new</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">$"{user.FirstName} {user.LastName}"</span><span class="p">,</span>
<span class="w">            </span><span class="n">Cpf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Cpf</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">SubAccountStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OwnerSubAccountStatusEnum</span><span class="p">.</span><span class="n">Pending</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">UpdatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>

<span class="w">    </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"KYC submitted for owner {OwnerId}"</span><span class="p">,</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">owner</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="2-admin-revisa-documentos">2. Admin Revisa Documentos<a class="headerlink" href="#2-admin-revisa-documentos" title="Permanent link">¶</a></h3>
<p><strong>Frontend:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// pages/Admin/KycApprovals.tsx</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">KycApprovals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">pendingKyc</span><span class="p">,</span><span class="w"> </span><span class="nx">refetch</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQuery</span><span class="p">({</span>
<span class="w">    </span><span class="nx">queryKey</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'pending-kyc'</span><span class="p">],</span>
<span class="w">    </span><span class="nx">queryFn</span><span class="o">:</span><span class="w"> </span><span class="kt">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">httpClient</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/api/admin/kyc/pending'</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">})</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleApprove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">ownerId</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">'Aprovar este KYC?'</span><span class="p">))</span><span class="w"> </span><span class="k">return</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">httpClient</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`/api/admin/kyc/</span><span class="si">${</span><span class="nx">ownerId</span><span class="si">}</span><span class="sb">/approve`</span><span class="p">)</span>
<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s1">'KYC aprovado!'</span><span class="p">)</span>
<span class="w">      </span><span class="nx">refetch</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Erro ao aprovar KYC'</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">handleReject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">ownerId</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">(</span><span class="s1">'Motivo da rejeição:'</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">reason</span><span class="p">)</span><span class="w"> </span><span class="k">return</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">httpClient</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`/api/admin/kyc/</span><span class="si">${</span><span class="nx">ownerId</span><span class="si">}</span><span class="sb">/reject`</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">reason</span><span class="w"> </span><span class="p">})</span>
<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s1">'KYC rejeitado'</span><span class="p">)</span>
<span class="w">      </span><span class="nx">refetch</span><span class="p">()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">toast</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Erro ao rejeitar KYC'</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">KYC</span><span class="w"> </span><span class="nx">Pendentes</span><span class="w"> </span><span class="nx">de</span><span class="w"> </span><span class="nx">Aprovação</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">thead</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Nome</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Tipo</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">CPF</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Documentos</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Ações</span><span class="o">&lt;</span><span class="err">/th&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/tr&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/thead&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">tbody</span><span class="o">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">pendingKyc</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">kyc</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">tr</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">userName</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/td&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">kyc</span><span class="p">.</span><span class="kr">type</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/td&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">cpf</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/td&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">documents</span><span class="p">.</span><span class="nx">cpfUrl</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Ver</span><span class="w"> </span><span class="nx">CPF</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">documents</span><span class="p">.</span><span class="nx">rgUrl</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Ver</span><span class="w"> </span><span class="nx">RG</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">documents</span><span class="p">.</span><span class="nx">addressProofUrl</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Ver</span><span class="w"> </span><span class="nx">Comprovante</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">documents</span><span class="p">.</span><span class="nx">selfieUrl</span><span class="p">)}</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Ver</span><span class="w"> </span><span class="nx">Selfie</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/td&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span>
<span class="w">                  </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleApprove</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">)}</span>
<span class="w">                  </span><span class="nx">className</span><span class="o">=</span><span class="s2">"btn-success"</span>
<span class="w">                </span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Aprovar</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">button</span><span class="w"> </span>
<span class="w">                  </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">handleReject</span><span class="p">(</span><span class="nx">kyc</span><span class="p">.</span><span class="nx">ownerId</span><span class="p">)}</span>
<span class="w">                  </span><span class="nx">className</span><span class="o">=</span><span class="s2">"btn-danger"</span>
<span class="w">                </span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Rejeitar</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/button&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/td&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/tr&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/tbody&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/table&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="3-admin-aprova-kyc">3. Admin Aprova KYC<a class="headerlink" href="#3-admin-aprova-kyc" title="Permanent link">¶</a></h3>
<p><strong>Backend:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// AdminEndpoints.cs</span>
<span class="n">app</span><span class="p">.</span><span class="n">MapPost</span><span class="p">(</span><span class="s">"/api/admin/kyc/{id:long}/approve"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="w">    </span><span class="n">AdminService</span><span class="w"> </span><span class="n">service</span><span class="p">,</span>
<span class="w">    </span><span class="n">HttpRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">adminUserId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetUserIdFromToken</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="n">ApproveKycAsync</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Results</span><span class="p">.</span><span class="n">Ok</span><span class="p">(</span><span class="k">new</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">OwnerId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="w">        </span><span class="n">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Approved"</span><span class="p">,</span>
<span class="w">        </span><span class="n">ApprovedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">})</span>
<span class="p">.</span><span class="n">RequireAuthorization</span><span class="p">(</span><span class="s">"Admin"</span><span class="p">)</span>
<span class="p">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"ApproveKyc"</span><span class="p">);</span>
</code></pre></div></p>
<p><strong>Service:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// AdminService.cs</span>
<span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">ApproveKycAsync</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">ownerId</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Owners</span>
<span class="w">        </span><span class="p">.</span><span class="n">Include</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">User</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">FirstAsync</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">Id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ownerId</span><span class="p">);</span>

<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">SubAccountStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OwnerSubAccountStatusEnum</span><span class="p">.</span><span class="n">Approved</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">UpdatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Criar notificação</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Notification</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationTypeEnum</span><span class="p">.</span><span class="n">KycApproved</span><span class="p">,</span>
<span class="w">        </span><span class="n">Channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">NotificationPreference</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">NotificationChannelEnum</span><span class="p">.</span><span class="n">Email</span><span class="p">,</span>
<span class="w">        </span><span class="n">Email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">Email</span><span class="p">,</span>
<span class="w">        </span><span class="n">Phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">Telephone</span><span class="p">,</span>
<span class="w">        </span><span class="n">MetadataJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonSerializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="k">new</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">OwnerType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">ToString</span><span class="p">()</span>
<span class="w">        </span><span class="p">}),</span>
<span class="w">        </span><span class="n">CreatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Notifications</span><span class="p">.</span><span class="n">AddAsync</span><span class="p">(</span><span class="n">notification</span><span class="p">);</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>

<span class="w">    </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"KYC approved for owner {OwnerId} by admin {AdminUserId}"</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="n">ownerId</span><span class="p">,</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></p>
<h3 id="4-admin-rejeita-kyc-alternativo">4. Admin Rejeita KYC (Alternativo)<a class="headerlink" href="#4-admin-rejeita-kyc-alternativo" title="Permanent link">¶</a></h3>
<p><strong>Backend:</strong>
<div class="highlight"><pre><span></span><code><span class="n">app</span><span class="p">.</span><span class="n">MapPost</span><span class="p">(</span><span class="s">"/api/admin/kyc/{id:long}/reject"</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="w">    </span><span class="n">RejectKycDto</span><span class="w"> </span><span class="n">dto</span><span class="p">,</span>
<span class="w">    </span><span class="n">AdminService</span><span class="w"> </span><span class="n">service</span><span class="p">,</span>
<span class="w">    </span><span class="n">HttpRequest</span><span class="w"> </span><span class="n">request</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">adminUserId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetUserIdFromToken</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="n">RejectKycAsync</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Reason</span><span class="p">,</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Results</span><span class="p">.</span><span class="n">Ok</span><span class="p">(</span><span class="k">new</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">OwnerId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="w">        </span><span class="n">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Rejected"</span><span class="p">,</span>
<span class="w">        </span><span class="n">Reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dto</span><span class="p">.</span><span class="n">Reason</span><span class="p">,</span>
<span class="w">        </span><span class="n">RejectedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">})</span>
<span class="p">.</span><span class="n">RequireAuthorization</span><span class="p">(</span><span class="s">"Admin"</span><span class="p">)</span>
<span class="p">.</span><span class="n">WithName</span><span class="p">(</span><span class="s">"RejectKyc"</span><span class="p">);</span>
</code></pre></div></p>
<p><strong>Service:</strong>
<div class="highlight"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">RejectKycAsync</span><span class="p">(</span><span class="kt">long</span><span class="w"> </span><span class="n">ownerId</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">reason</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Owners</span>
<span class="w">        </span><span class="p">.</span><span class="n">Include</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">User</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">FirstAsync</span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">Id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ownerId</span><span class="p">);</span>

<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">SubAccountStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OwnerSubAccountStatusEnum</span><span class="p">.</span><span class="n">Rejected</span><span class="p">;</span>
<span class="w">    </span><span class="n">owner</span><span class="p">.</span><span class="n">UpdatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Criar notificação com motivo</span>
<span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">notification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Notification</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NotificationTypeEnum</span><span class="p">.</span><span class="n">KycRejected</span><span class="p">,</span>
<span class="w">        </span><span class="n">Channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">NotificationPreference</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="n">NotificationChannelEnum</span><span class="p">.</span><span class="n">Email</span><span class="p">,</span>
<span class="w">        </span><span class="n">Email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">Email</span><span class="p">,</span>
<span class="w">        </span><span class="n">Phone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">User</span><span class="p">.</span><span class="n">Telephone</span><span class="p">,</span>
<span class="w">        </span><span class="n">MetadataJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JsonSerializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="k">new</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">OwnerType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">owner</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">ToString</span><span class="p">(),</span>
<span class="w">            </span><span class="n">Reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reason</span>
<span class="w">        </span><span class="p">}),</span>
<span class="w">        </span><span class="n">CreatedAt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Notifications</span><span class="p">.</span><span class="n">AddAsync</span><span class="p">(</span><span class="n">notification</span><span class="p">);</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">();</span>

<span class="w">    </span><span class="n">_logger</span><span class="p">.</span><span class="n">LogInformation</span><span class="p">(</span><span class="s">"KYC rejected for owner {OwnerId} by admin {AdminUserId}. Reason: {Reason}"</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="n">ownerId</span><span class="p">,</span><span class="w"> </span><span class="n">adminUserId</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="documentos-necessarios">Documentos Necessários<a class="headerlink" href="#documentos-necessarios" title="Permanent link">¶</a></h2>
<ol>
<li><strong>CPF</strong>: Frente e verso (imagem ou PDF)</li>
<li><strong>RG</strong>: Frente e verso (imagem ou PDF)</li>
<li><strong>Comprovante de Endereço</strong>: Máximo 3 meses (conta de luz, água, telefone)</li>
<li><strong>Selfie com Documento</strong>: Foto segurando RG ou CNH</li>
</ol>
<h2 id="restricoes-por-status">Restrições por Status<a class="headerlink" href="#restricoes-por-status" title="Permanent link">¶</a></h2>
<h3 id="notstarted">NotStarted<a class="headerlink" href="#notstarted" title="Permanent link">¶</a></h3>
<ul>
<li>❌ Não pode gerar links de afiliado</li>
<li>❌ Não pode receber comissões</li>
</ul>
<h3 id="pending">Pending<a class="headerlink" href="#pending" title="Permanent link">¶</a></h3>
<ul>
<li>❌ Não pode gerar links de afiliado</li>
<li>❌ Não pode receber comissões</li>
<li>✅ Pode visualizar status</li>
</ul>
<h3 id="approved">Approved<a class="headerlink" href="#approved" title="Permanent link">¶</a></h3>
<ul>
<li>✅ Pode gerar links de afiliado</li>
<li>✅ Pode receber comissões</li>
<li>✅ Subconta Iugu ativa</li>
</ul>
<h3 id="rejected">Rejected<a class="headerlink" href="#rejected" title="Permanent link">¶</a></h3>
<ul>
<li>❌ Não pode gerar links de afiliado</li>
<li>❌ Não pode receber comissões</li>
<li>✅ Pode reenviar documentos</li>
</ul>
<h2 id="regras-de-negocio">Regras de Negócio<a class="headerlink" href="#regras-de-negocio" title="Permanent link">¶</a></h2>
<ol>
<li><strong>Apenas Promoter/Influencer</strong>: Outros tipos não podem enviar KYC</li>
<li><strong>Subconta automática</strong>: Criada ao enviar documentos</li>
<li><strong>Reenvio</strong>: Pode reenviar quantas vezes necessário</li>
<li><strong>Notificação</strong>: Email/WhatsApp ao aprovar/rejeitar</li>
<li><strong>Motivo obrigatório</strong>: Ao rejeitar, deve informar motivo</li>
</ol>
<h2 id="proximos-passos">Próximos Passos<a class="headerlink" href="#proximos-passos" title="Permanent link">¶</a></h2>
<ul>
<li><a href="../../pagamentos/processo-kyc/">Processo KYC</a></li>
<li><a href="../../perfis-de-usuario/promoter/">Perfil Promoter</a></li>
<li><a href="../../apis/backend-api/endpoints/owner/">Endpoint: Owner</a></li>
<li><a href="../../apis/backend-api/endpoints/admin/">Endpoint: Admin</a></li>
</ul>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Última atualização">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="17 de outubro de 2025 00:57:36 UTC">17 de outubro de 2025</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Criado em">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="17 de outubro de 2025 00:57:36 UTC">17 de outubro de 2025</span>
</span>
</aside>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Voltar para o topo
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
</body>
</html>